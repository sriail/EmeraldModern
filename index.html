<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/emerald.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nova (Emerald Beta)</title>
    <meta
      name="description"
      content="The Emerald service, your one stop solution for all you're nefarious needs"
    />
    <meta name="og:image" content="/emerald.png" />

    <link rel="prefetch" href="/scram/scramjet.worker.js" />
    <link rel="prefetch" href="/scram/scramjet.shared.js" />
  </head>
  <body>
    <div id="root"></div>
    <input type="password" name="" id="" style="height: 0px; width: 0px; position: absolute; top: -1000px; left: -1000px" />
    <script src="/scram/scramjet.controller.js"></script>
    <script>
      const scramjet = new ScramjetController({
  prefix: "/~/scramjet/",
  files: {
    wasm: "/scram/scramjet.wasm.wasm",
    worker: "/scram/scramjet.worker.js",
    client: "/scram/scramjet.client.js",
    shared: "/scram/scramjet.shared.js",
    sync: "/scram/scramjet.sync.js",
  },
  // Inject popup interception script
  defaultFlags: {
    serviceworkers: true,
  },
  codec: {
    encode(url) {
      return encodeURIComponent(url);
    },
    decode(url) {
      return decodeURIComponent(url);
    }
  }
});

// Add script injection handler
scramjet.loadConfig = async function() {
  await this.constructor.prototype.loadConfig.call(this);
  
  // Inject our custom script into all pages
  const originalCreateFrame = this.createFrame;
  this.createFrame = function(frame) {
    if (originalCreateFrame) {
      originalCreateFrame.call(this, frame);
    }
    
    // Inject the popup interception script
    if (frame && frame.contentWindow) {
      try {
        const script = document.createElement('script');
        script.src = '/scram/scramjet-inject.js';
        frame.contentDocument?.head?.appendChild(script);
      } catch (e) {
        console.warn('Could not inject Scramjet popup script:', e);
      }
    }
  };
};

window.sj = scramjet;
    </script>
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
